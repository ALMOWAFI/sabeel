<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabeel Islamic Knowledge System</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background: #f7fafc;
        }
        .sabeel-hero {
            background: linear-gradient(135deg, #10B981 0%, #047857 100%);
            color: white;
        }
        .card {
            transition: all 0.3s ease;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px rgba(0, 0, 0, 0.1);
        }
        .tab {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-bottom: 2px solid transparent;
        }
        .tab.active {
            color: #10B981;
            border-bottom: 2px solid #10B981;
            font-weight: 500;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .admin-tab-content {
            display: none;
        }
        .admin-tab-content.active {
            display: block;
        }
        .auth-content {
            display: none;
        }
        .auth-content.active {
            display: block;
        }
        .feedback-box {
            background-color: #f3f4f6;
            border-left: 4px solid #10B981;
            padding: 1rem;
            border-radius: 0 4px 4px 0;
        }
        .practice-box {
            background-color: #f3f4f6;
            border-left: 4px solid #10B981;
            padding: 1rem;
            border-radius: 0 4px 4px 0;
        }
        .error-highlight {
            background-color: rgba(239, 68, 68, 0.2);
            border-radius: 4px;
            padding: 0.25rem;
        }
        /* Premium Section Styles */
        .premium-card {
            background: linear-gradient(135deg, #1E293B 0%, #0F172A 100%);
            color: white;
            border: 2px solid #F59E0B;
            position: relative;
            overflow: hidden;
            animation: premium-border-pulse 3s infinite;
            transform-style: preserve-3d;
            perspective: 1000px;
            transition: all 0.5s ease;
        }
        .premium-card:hover {
            transform: translateY(-10px) rotateX(5deg);
            box-shadow: 0 20px 30px rgba(245, 158, 11, 0.2);
        }
        @keyframes premium-border-pulse {
            0% { box-shadow: 0 0 5px #F59E0B; }
            50% { box-shadow: 0 0 20px #F59E0B, 0 0 30px rgba(245, 158, 11, 0.5); }
            100% { box-shadow: 0 0 5px #F59E0B; }
        }
        .premium-badge {
            position: absolute;
            top: 0;
            right: 0;
            background: #F59E0B;
            color: #0F172A;
            padding: 0.5rem 1rem;
            font-weight: bold;
            transform: rotate(45deg) translateX(1.5rem) translateY(-1.5rem);
            width: 150px;
            text-align: center;
            box-shadow: 0 5px 10px rgba(0,0,0,0.2);
            animation: badge-shine 2s infinite alternate;
        }
        @keyframes badge-shine {
            from { background: #F59E0B; }
            to { background: linear-gradient(90deg, #F59E0B, #FBBF24, #F59E0B); background-size: 200% 100%; }
        }
        .premium-feature {
            background: rgba(245, 158, 11, 0.1);
            border-left: 4px solid #F59E0B;
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 0 4px 4px 0;
            transition: all 0.3s ease;
            position: relative;
            z-index: 1;
            overflow: hidden;
        }
        .premium-feature:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0;
            height: 100%;
            background: rgba(245, 158, 11, 0.2);
            transition: all 0.5s ease;
            z-index: -1;
        }
        .premium-feature:hover {
            transform: translateX(5px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.2);
        }
        .premium-feature:hover:before {
            width: 100%;
        }
        .premium-feature:hover .feature-icon {
            transform: rotate(360deg);
            background: rgba(245, 158, 11, 0.4);
        }
        .premium-btn {
            background: linear-gradient(135deg, #F59E0B 0%, #D97706 100%);
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            transition: all 0.3s ease;
            border: none;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            cursor: pointer;
            display: inline-block;
            position: relative;
            overflow: hidden;
            z-index: 1;
        }
        .premium-btn:before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: all 0.5s ease;
            z-index: -1;
        }
        .premium-btn:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 10px 20px rgba(245, 158, 11, 0.3);
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
        }
        .premium-btn:hover:before {
            left: 100%;
            transition: all 0.8s ease;
        }
        .feature-icon {
            background: rgba(245, 158, 11, 0.2);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            color: #F59E0B;
            transition: all 0.5s ease;
            box-shadow: 0 0 10px rgba(245, 158, 11, 0.3);
        }
        .glow-effect {
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from {
                box-shadow: 0 0 5px #F59E0B, 0 0 10px #F59E0B;
            }
            to {
                box-shadow: 0 0 10px #F59E0B, 0 0 20px #F59E0B;
            }
        }
        .premium-divider {
            height: 4px;
            background: linear-gradient(90deg, transparent, #F59E0B, transparent);
            margin: 1.5rem 0;
        }
    </style>
</head>
<body>
    <!-- Floating Premium Badge -->
    <div id="floatingPremiumBadge" class="hidden fixed bottom-4 left-4 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center z-40 cursor-pointer transform hover:scale-110 transition-all duration-300">
        <i class="fas fa-crown mr-2 animate-pulse"></i>
        <span class="relative">Upgrade to Premium
            <span class="absolute -top-2 -right-2 bg-red-500 text-xs text-white px-2 py-0.5 rounded-full animate-bounce">50% OFF</span>
        </span>
        <div class="absolute inset-0 rounded-full bg-gradient-to-r from-yellow-400 to-yellow-600 opacity-0 hover:opacity-30 transition-opacity duration-300"></div>
    </div>
    
    <!-- User Account Panel (initially hidden) -->
    <div id="userAccountPanel" class="hidden fixed top-4 right-4 bg-white rounded-lg shadow-lg p-4 z-50 w-80">
        <div class="flex justify-between items-center mb-4">
            <h3 class="text-lg font-semibold">My Account</h3>
            <button id="closeAccountPanel" class="text-gray-500 hover:text-gray-700">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div id="userAccountContent">
            <!-- Content will be dynamically populated -->
        </div>
    </div>
    
    <!-- Login/Register Modal (initially hidden) -->
    <div id="authModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white rounded-lg p-6 max-w-md w-full">
            <div class="flex justify-between items-center mb-4">
                <h3 id="authModalTitle" class="text-xl font-semibold">Sign In</h3>
                <button id="closeAuthModal" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="authTabs" class="flex border-b mb-4">
                <div id="loginTab" class="tab active">Sign In</div>
                <div id="registerTab" class="tab">Register</div>
            </div>
            <div id="loginForm" class="auth-content active">
                <form class="space-y-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Email or Username</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                        <input type="password" class="w-full px-3 py-2 border rounded-md" required>
                    </div>
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <input id="remember" type="checkbox" class="h-4 w-4 text-green-600 border-gray-300 rounded">
                            <label for="remember" class="ml-2 block text-sm text-gray-700">Remember me</label>
                        </div>
                        <a href="#" class="text-sm text-green-600 hover:text-green-500">Forgot password?</a>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md">Sign In</button>
                    <div class="text-center mt-2">
                        <button type="button" id="guestModeBtn" class="text-sm text-gray-600 hover:text-green-600">Continue as Guest</button>
                    </div>
                </form>
            </div>
            <div id="registerForm" class="auth-content hidden">
                <form class="space-y-4">
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Email Address</label>
                        <input type="email" class="w-full px-3 py-2 border rounded-md" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Display Name/Nickname (Optional)</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" placeholder="How others will see you">
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Password</label>
                        <input type="password" class="w-full px-3 py-2 border rounded-md" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Confirm Password</label>
                        <input type="password" class="w-full px-3 py-2 border rounded-md" required>
                    </div>
                    <div class="flex items-center">
                        <input id="terms" type="checkbox" class="h-4 w-4 text-green-600 border-gray-300 rounded" required>
                        <label for="terms" class="ml-2 block text-sm text-gray-700">I agree to the <a href="#" class="text-green-600 hover:text-green-500">Terms of Service</a> and <a href="#" class="text-green-600 hover:text-green-500">Privacy Policy</a></label>
                    </div>
                    <button type="submit" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md">Create Account</button>
                    <div class="text-center mt-2">
                        <button type="button" id="guestModeRegisterBtn" class="text-sm text-gray-600 hover:text-green-600">Continue as Guest</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
    
    <!-- Islamic Knowledge Quote Banner -->
    <div class="bg-gray-100 py-3 px-4 text-center text-gray-700 border-b">
        <div class="max-w-7xl mx-auto flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0">
            <i class="fas fa-quote-left text-green-600 mr-2 hidden sm:block"></i>
            <p id="islamicQuote" class="italic text-sm sm:text-base">"Seeking knowledge is an obligation upon every Muslim." — Prophet Muhammad ﷺ</p>
            <i class="fas fa-quote-right text-green-600 ml-2 hidden sm:block"></i>
        </div>
    </div>
    
    <div class="sabeel-hero py-12 px-4 sm:px-6 lg:px-8">
        <div class="max-w-7xl mx-auto relative">
            <!-- User Account Button -->
            <div class="absolute top-0 right-0 flex space-x-2">
                <button id="userAccountBtn" class="bg-white bg-opacity-20 hover:bg-opacity-30 text-white px-4 py-2 rounded-full flex items-center transition-all duration-300">
                    <i class="fas fa-user-circle mr-2"></i>
                    <span id="userDisplayName">Account</span>
                </button>
            </div>
            
            <h1 class="text-4xl font-bold mb-2">Sabeel Islamic Knowledge System</h1>
            <p class="text-xl mb-6">Advanced AI-powered Islamic knowledge exploration and learning platform</p>
            <div class="flex items-center space-x-4">
                <div class="h-2 w-2 rounded-full bg-green-400 animate-pulse"></div>
                <p>AI models: Ready</p>
            </div>
        </div>
    </div>

    <div class="max-w-7xl mx-auto py-8 px-4 sm:px-6 lg:px-8">
        <!-- Admin Panel (initially hidden) -->
        <div id="adminPanel" class="hidden mb-8 bg-white border-2 border-green-600 rounded-lg shadow-lg overflow-hidden">
            <div class="bg-green-600 text-white px-6 py-4 flex justify-between items-center">
                <h2 class="text-xl font-bold">Sabeel Administration Panel</h2>
                <button id="closeAdminPanel" class="text-white hover:text-gray-200">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="p-6">
                <div class="flex border-b mb-6">
                    <div id="tab-quotes" class="tab active">Islamic Quotes</div>
                    <div id="tab-moderation" class="tab">Content Moderation</div>
                    <div id="tab-users" class="tab">User Management</div>
                </div>
                
                <!-- Quotes Management -->
                <div id="content-quotes" class="admin-tab-content active">
                    <h3 class="text-lg font-semibold mb-4">Manage Islamic Knowledge Quotes</h3>
                    <p class="text-gray-600 mb-4">Add, edit, or remove quotes that appear in the rotating banner at the top of the page.</p>
                    
                    <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <h4 class="font-medium mb-2">Add New Quote</h4>
                        <form id="addQuoteForm" class="space-y-3">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Quote Text</label>
                                <textarea class="w-full px-3 py-2 border rounded-md" rows="2" placeholder="Enter the quote text" required></textarea>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-1">Attribution</label>
                                <input type="text" class="w-full px-3 py-2 border rounded-md" placeholder="Source or author of the quote" required>
                            </div>
                            <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-medium py-1 px-4 rounded-md">Add Quote</button>
                        </form>
                    </div>
                    
                    <div class="border rounded-lg overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Quote</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Attribution</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200" id="quotesTableBody">
                                <!-- Quotes will be populated here -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Content Moderation -->
                <div id="content-moderation" class="admin-tab-content hidden">
                    <h3 class="text-lg font-semibold mb-4">Content Moderation Queue</h3>
                    <p class="text-gray-600 mb-4">Review and approve user-submitted content before it appears on the platform.</p>
                    
                    <div class="border rounded-lg overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Content Type</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Submitted By</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">Question</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Ahmad S.</td>
                                    <td class="px-6 py-4 whitespace-nowrap">2023-06-15</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">Pending</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-green-600 hover:text-green-900 mr-3">Review</button>
                                        <button class="text-red-600 hover:text-red-900">Reject</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">Resource</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Fatima K.</td>
                                    <td class="px-6 py-4 whitespace-nowrap">2023-06-14</td>
                                    <td class="px-6 py-4 whitespace-nowrap"><span class="px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800">Pending</span></td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-green-600 hover:text-green-900 mr-3">Review</button>
                                        <button class="text-red-600 hover:text-red-900">Reject</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- User Management -->
                <div id="content-users" class="admin-tab-content hidden">
                    <h3 class="text-lg font-semibold mb-4">User Management</h3>
                    <p class="text-gray-600 mb-4">Manage user accounts, permissions, and activity.</p>
                    
                    <div class="flex mb-4">
                        <input type="text" placeholder="Search users..." class="px-3 py-2 border rounded-l-md focus:outline-none focus:ring-1 focus:ring-green-500 w-full">
                        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-r-md">Search</button>
                    </div>
                    
                    <div class="border rounded-lg overflow-hidden">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">User</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Credits</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody class="bg-white divide-y divide-gray-200">
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                                                <span class="text-green-600 font-bold">A</span>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">Ahmad Saeed</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">ahmad@example.com</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Member</td>
                                    <td class="px-6 py-4 whitespace-nowrap">45</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-indigo-600 hover:text-indigo-900 mr-3">Edit</button>
                                        <button class="text-red-600 hover:text-red-900">Suspend</button>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="px-6 py-4 whitespace-nowrap">
                                        <div class="flex items-center">
                                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-green-100 flex items-center justify-center">
                                                <span class="text-green-600 font-bold">F</span>
                                            </div>
                                            <div class="ml-4">
                                                <div class="text-sm font-medium text-gray-900">Fatima Khan</div>
                                            </div>
                                        </div>
                                    </td>
                                    <td class="px-6 py-4 whitespace-nowrap">fatima@example.com</td>
                                    <td class="px-6 py-4 whitespace-nowrap">Premium</td>
                                    <td class="px-6 py-4 whitespace-nowrap">120</td>
                                    <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                                        <button class="text-indigo-600 hover:text-indigo-900 mr-3">Edit</button>
                                        <button class="text-red-600 hover:text-red-900">Suspend</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
        <!-- Premium Members Section -->
        <div class="premium-card p-6 mb-8 glow-effect">
            <div class="premium-badge">PREMIUM</div>
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <div class="lg:col-span-2">
                    <h2 class="text-3xl font-bold mb-4">Premium Membership Benefits</h2>
                    <p class="text-lg mb-6">Unlock the full potential of Islamic knowledge with our premium features designed for serious scholars and learners.</p>
                    
                    <div class="space-y-4">
                        <div class="premium-feature flex items-start">
                            <div class="feature-icon">
                                <i class="fas fa-book-open"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg">Advanced Scholarly Resources</h3>
                                <p>Access to rare manuscripts, scholarly commentaries, and exclusive translations not available in the standard version.</p>
                            </div>
                        </div>
                        
                        <div class="premium-feature flex items-start">
                            <div class="feature-icon">
                                <i class="fas fa-brain"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg">Enhanced AI Analysis</h3>
                                <p>Utilize our most powerful AI models for deeper textual analysis, complex theological questions, and comparative religious studies.</p>
                            </div>
                        </div>
                        
                        <div class="premium-feature flex items-start">
                            <div class="feature-icon">
                                <i class="fas fa-language"></i>
                            </div>
                            <div>
                                <h3 class="font-semibold text-lg">Advanced Arabic OCR</h3>
                                <p>Process complex Arabic manuscripts with 99.8% accuracy, including ancient calligraphic styles and regional variations.</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Premium Testimonials Carousel -->
                    <div class="mt-8 bg-white bg-opacity-5 p-4 rounded-lg">
                        <h3 class="font-semibold text-lg mb-4 flex items-center">
                            <i class="fas fa-quote-left text-yellow-500 mr-2"></i>
                            What Our Premium Members Say
                        </h3>
                        <div id="testimonials-carousel" class="relative overflow-hidden h-32">
                            <div class="testimonial-slide absolute inset-0 opacity-0 transition-opacity duration-1000 ease-in-out flex items-center">
                                <div class="flex items-start">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 flex items-center justify-center text-white font-bold mr-4 flex-shrink-0">
                                        MA
                                    </div>
                                    <div>
                                        <p class="italic">"The premium features have transformed my research. I was able to analyze a 14th-century manuscript that would have taken weeks to decipher manually."</p>
                                        <p class="text-yellow-500 mt-2">— Dr. Muhammad Al-Azhari, Islamic Studies Professor</p>
                                    </div>
                                </div>
                            </div>
                            <div class="testimonial-slide absolute inset-0 opacity-0 transition-opacity duration-1000 ease-in-out flex items-center">
                                <div class="flex items-start">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 flex items-center justify-center text-white font-bold mr-4 flex-shrink-0">
                                        SQ
                                    </div>
                                    <div>
                                        <p class="italic">"The Scholar Connect feature allowed me to get direct insights from experts on complex theological questions. Worth every penny!"</p>
                                        <p class="text-yellow-500 mt-2">— Sarah Qureshi, Doctoral Candidate</p>
                                    </div>
                                </div>
                            </div>
                            <div class="testimonial-slide absolute inset-0 opacity-0 transition-opacity duration-1000 ease-in-out flex items-center">
                                <div class="flex items-start">
                                    <div class="w-12 h-12 rounded-full bg-gradient-to-r from-yellow-500 to-yellow-600 flex items-center justify-center text-white font-bold mr-4 flex-shrink-0">
                                        AH
                                    </div>
                                    <div>
                                        <p class="italic">"As an educator, the advanced knowledge graph has revolutionized how I teach Islamic history to my students. The visual connections between concepts are invaluable."</p>
                                        <p class="text-yellow-500 mt-2">— Ahmed Hassan, Islamic Academy Director</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="lg:col-span-1">
                    <div class="bg-white bg-opacity-10 p-6 rounded-lg">
                        <h3 class="text-2xl font-bold mb-4 text-center">Upgrade Today</h3>
                        <div class="text-center mb-6">
                            <span class="text-4xl font-bold">$9.99</span>
                            <span class="text-lg">/month</span>
                        </div>
                        
                        <ul class="space-y-2 mb-6">
                            <li class="flex items-center">
                                <i class="fas fa-check-circle text-yellow-500 mr-2"></i>
                                <span>Unlimited OCR Processing</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check-circle text-yellow-500 mr-2"></i>
                                <span>Priority AI Response</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check-circle text-yellow-500 mr-2"></i>
                                <span>Advanced Knowledge Graph</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check-circle text-yellow-500 mr-2"></i>
                                <span>Scholarly Citation Export</span>
                            </li>
                            <li class="flex items-center">
                                <i class="fas fa-check-circle text-yellow-500 mr-2"></i>
                                <span>Ad-Free Experience</span>
                            </li>
                        </ul>
                        
                        <button class="premium-btn w-full" id="upgradeBtn">
                            <i class="fas fa-crown mr-2"></i> Upgrade Now
                        </button>
                        
                        <p class="text-xs text-center mt-4 text-gray-300">30-day money-back guarantee</p>
                        
                        <!-- Limited Time Offer Badge -->
                        <div class="mt-6 bg-yellow-500 text-black font-bold text-center py-2 px-4 rounded-md transform -rotate-2 shadow-lg">
                            <div class="text-sm">LIMITED TIME OFFER</div>
                            <div class="text-lg">First Month 50% OFF!</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2">
                <div class="card bg-white p-6 mb-6">
                    <h2 class="text-2xl font-semibold mb-4">Upload Student Work</h2>
                    <form id="uploadForm" enctype="multipart/form-data">
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="fileUpload">
                                Student's Homework Image
                            </label>
                            <input class="w-full" type="file" id="fileUpload" name="file" accept="image/*">
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="studentWork">
                                Student's Work (Transcribed)
                            </label>
                            <textarea class="w-full px-3 py-2 border rounded-md" id="studentWork" name="student_work" rows="5" placeholder="Enter or paste the student's work here"></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="correctSolution">
                                Correct Solution (Optional)
                            </label>
                            <textarea class="w-full px-3 py-2 border rounded-md" id="correctSolution" name="correct_solution" rows="5" placeholder="Enter the correct solution (if available)"></textarea>
                        </div>
                        
                        <div class="mb-4">
                            <label class="block text-gray-700 text-sm font-medium mb-2" for="teachingStyle">
                                Teaching Style
                            </label>
                            <select class="w-full px-3 py-2 border rounded-md" id="teachingStyle" name="teaching_style">
                                {% for style in teaching_styles %}
                                <option value="{{ style }}">{{ style|replace('_', ' ')|title }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        
                        <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md">
                            Analyze &amp; Generate Feedback
                        </button>
                    </form>
                </div>
            </div>
            
            <div class="lg:col-span-1">
                <div class="card bg-white p-6">
                    <h2 class="text-2xl font-semibold mb-4">How It Works</h2>
                    <ol class="list-decimal pl-5 space-y-3">
                        <li class="text-gray-700">Upload an image containing Arabic Islamic text</li>
                        <li class="text-gray-700">Our advanced OCR processes the text accurately</li>
                        <li class="text-gray-700">AI analyzes the content for scholarly references</li>
                        <li class="text-gray-700">Get comprehensive explanations and context</li>
                        <li class="text-gray-700">Explore related concepts through our knowledge graph</li>
                    </ol>
                    
                    <div class="mt-6 bg-green-50 p-4 rounded-md">
                        <h3 class="font-medium text-green-800">Available Knowledge Domains:</h3>
                        <ul class="mt-2 space-y-1">
                            <li class="text-sm text-gray-600">• <strong>Quranic Studies</strong> - Tafsir, linguistics, and historical context</li>
                            <li class="text-sm text-gray-600">• <strong>Hadith Sciences</strong> - Authentication, categorization, and interpretation</li>
                            <li class="text-sm text-gray-600">• <strong>Islamic Jurisprudence</strong> - Legal rulings across different schools</li>
                            <li class="text-sm text-gray-600">• <strong>Islamic History</strong> - Comprehensive timeline and key events</li>
                            <li class="text-sm text-gray-600">• <strong>Comparative Theology</strong> - Scholarly discourse and analysis</li>
                        </ul>
                    </div>
                    
                    <div class="mt-6 border-2 border-yellow-500 p-4 rounded-md relative overflow-hidden">
                        <div class="absolute top-0 right-0 bg-yellow-500 text-xs text-white px-2 py-1 font-bold">PREMIUM</div>
                        <h3 class="font-medium text-yellow-800 mt-2">Premium-Only Features:</h3>
                        <ul class="mt-2 space-y-1">
                            <li class="text-sm text-gray-600 flex items-center">
                                <i class="fas fa-lock text-yellow-500 mr-2"></i>
                                <span><strong>Manuscript Analysis</strong> - Process ancient manuscripts with 99.8% accuracy</span>
                            </li>
                            <li class="text-sm text-gray-600 flex items-center">
                                <i class="fas fa-lock text-yellow-500 mr-2"></i>
                                <span><strong>Scholar Connect</strong> - Direct access to Islamic scholars</span>
                            </li>
                            <li class="text-sm text-gray-600 flex items-center">
                                <i class="fas fa-lock text-yellow-500 mr-2"></i>
                                <span><strong>Advanced Citations</strong> - Export in academic formats</span>
                            </li>
                        </ul>
                        <button id="sidebarUpgradeBtn" class="mt-3 w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white font-bold py-2 px-4 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition duration-300 flex items-center justify-center">
                            <i class="fas fa-crown mr-2"></i> Unlock Premium Features
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="results" class="mt-8 hidden">
            <div class="card bg-white p-6">
                <h2 class="text-2xl font-semibold mb-4">Analysis Results</h2>
                
                <div class="flex border-b mb-4">
                    <div id="tab-images" class="tab active">Images</div>
                    <div id="tab-feedback" class="tab">Feedback</div>
                    <div id="tab-practice" class="tab">Practice Sheet</div>
                </div>
                
                <div id="content-images" class="tab-content active">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <h3 class="text-lg font-medium mb-2">Original Image</h3>
                            <img id="originalImage" class="max-w-full h-auto rounded-md" src="" alt="Original student work">
                        </div>
                        <div>
                            <h3 class="text-lg font-medium mb-2">Annotated Image</h3>
                            <img id="markedImage" class="max-w-full h-auto rounded-md" src="" alt="Annotated student work">
                        </div>
                    </div>
                </div>
                
                <div id="content-feedback" class="tab-content">
                    <div>
                        <h3 class="text-lg font-medium mb-2">Expert Feedback</h3>
                        <div id="expertFeedback" class="feedback-box whitespace-pre-line"></div>
                    </div>
                    
                    <div class="mt-6">
                        <h3 class="text-lg font-medium mb-2">Detected Errors</h3>
                        <div id="errorList" class="space-y-3"></div>
                    </div>
                </div>
                
                <div id="content-practice" class="tab-content">
                    <h3 class="text-lg font-medium mb-2">Custom Practice Sheet</h3>
                    <div id="practiceSheet" class="practice-box whitespace-pre-line"></div>
                    <button id="printPractice" class="mt-4 bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md">
                        Print Practice Sheet
                    </button>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-gray-800 text-white py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 mb-8">
                <div>
                    <h3 class="text-lg font-semibold mb-4">Sabeel Knowledge</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">About Us</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Our Mission</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Scholarly Board</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Contact</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Resources</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Quran Database</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Hadith Collections</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Scholarly Works</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Historical Texts</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Membership</h3>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-300 hover:text-white">Free Account</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white flex items-center"><i class="fas fa-crown text-yellow-500 mr-1"></i> Premium Benefits</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Institutional Access</a></li>
                        <li><a href="#" class="text-gray-300 hover:text-white">Gift Membership</a></li>
                    </ul>
                </div>
                <div>
                    <h3 class="text-lg font-semibold mb-4">Connect</h3>
                    <div class="flex space-x-4 mb-4">
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-facebook"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="text-gray-300 hover:text-white"><i class="fab fa-youtube"></i></a>
                    </div>
                    <p class="text-sm text-gray-400">Subscribe to our newsletter for updates on new features and content.</p>
                    <div class="mt-2 flex">
                        <input type="email" placeholder="Your email" class="px-3 py-2 bg-gray-700 text-white rounded-l-md focus:outline-none focus:ring-1 focus:ring-green-500 w-full">
                        <button class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-r-md">Subscribe</button>
                    </div>
                </div>
            </div>
            <div class="pt-4 border-t border-gray-700 flex flex-col md:flex-row justify-between items-center">
                <p class="text-center md:text-left">Sabeel Islamic Knowledge System © 2025</p>
                <div class="flex space-x-4 mt-4 md:mt-0">
                    <a href="#" class="text-sm text-gray-400 hover:text-white">Privacy Policy</a>
                    <a href="#" class="text-sm text-gray-400 hover:text-white">Terms of Service</a>
                    <a href="#" class="text-sm text-gray-400 hover:text-white">Cookie Policy</a>
                </div>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const uploadForm = document.getElementById('uploadForm');
            const resultsSection = document.getElementById('results');
            const originalImage = document.getElementById('originalImage');
            const markedImage = document.getElementById('markedImage');
            const expertFeedback = document.getElementById('expertFeedback');
            const errorList = document.getElementById('errorList');
            const practiceSheet = document.getElementById('practiceSheet');
            const printPractice = document.getElementById('printPractice');
            const upgradeBtn = document.getElementById('upgradeBtn');
            
            const tabs = document.querySelectorAll('.tab');
            const tabContents = document.querySelectorAll('.tab-content');
            
            // Premium Features Animation
            const premiumFeatures = document.querySelectorAll('.premium-feature');
            premiumFeatures.forEach((feature, index) => {
                // Add staggered animation delay
                setTimeout(() => {
                    feature.classList.add('animate-pulse');
                    setTimeout(() => {
                        feature.classList.remove('animate-pulse');
                    }, 1000);
                }, index * 300);
            });
            
            // Premium Upgrade Buttons
            if (upgradeBtn) {
                upgradeBtn.addEventListener('click', function() {
                    // Show premium modal
                    showPremiumModal();
                });
            }
            
            // Sidebar Premium Button
            const sidebarUpgradeBtn = document.getElementById('sidebarUpgradeBtn');
            if (sidebarUpgradeBtn) {
                sidebarUpgradeBtn.addEventListener('click', function() {
                    // Show premium modal
                    showPremiumModal();
                });
            }
            
            // Floating Premium Badge
            const floatingPremiumBadge = document.getElementById('floatingPremiumBadge');
            if (floatingPremiumBadge) {
                // Show badge after scrolling down
                window.addEventListener('scroll', function() {
                    if (window.scrollY > 300) {
                        floatingPremiumBadge.classList.remove('hidden');
                        // Add entrance animation
                        floatingPremiumBadge.classList.add('animate-bounce');
                        setTimeout(() => {
                            floatingPremiumBadge.classList.remove('animate-bounce');
                        }, 1000);
                    } else {
                        floatingPremiumBadge.classList.add('hidden');
                    }
                });
                
                // Click event for floating badge
                floatingPremiumBadge.addEventListener('click', function() {
                    showPremiumModal();
                    // Scroll to premium section
                    const premiumCard = document.querySelector('.premium-card');
                    if (premiumCard) {
                        premiumCard.scrollIntoView({ behavior: 'smooth' });
                        // Highlight premium card
                        premiumCard.classList.add('animate-pulse');
                        setTimeout(() => {
                            premiumCard.classList.remove('animate-pulse');
                        }, 1500);
                    }
                });
            }
            
            // Testimonials Carousel Animation
            const testimonialSlides = document.querySelectorAll('.testimonial-slide');
            if (testimonialSlides.length > 0) {
                let currentSlide = 0;
                
                // Show first slide initially
                testimonialSlides[0].classList.add('opacity-100');
                
                // Rotate testimonials every 5 seconds
                setInterval(() => {
                    // Hide current slide
                    testimonialSlides[currentSlide].classList.remove('opacity-100');
                    testimonialSlides[currentSlide].classList.add('opacity-0');
                    
                    // Move to next slide
                    currentSlide = (currentSlide + 1) % testimonialSlides.length;
                    
                    // Show next slide
                    testimonialSlides[currentSlide].classList.remove('opacity-0');
                    testimonialSlides[currentSlide].classList.add('opacity-100');
                }, 5000);
            }
            
            // Premium Modal Function
            function showPremiumModal() {
                // Create modal overlay
                const modalOverlay = document.createElement('div');
                modalOverlay.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
                
                // Create modal content
                const modalContent = document.createElement('div');
                modalContent.className = 'bg-white rounded-lg p-8 max-w-md w-full relative';
                
                // Close button
                const closeButton = document.createElement('button');
                closeButton.className = 'absolute top-4 right-4 text-gray-500 hover:text-gray-700';
                closeButton.innerHTML = '<i class="fas fa-times"></i>';
                closeButton.addEventListener('click', () => {
                    document.body.removeChild(modalOverlay);
                });
                
                // Modal header
                const modalHeader = document.createElement('div');
                modalHeader.className = 'text-center mb-6';
                modalHeader.innerHTML = `
                    <h3 class="text-2xl font-bold text-gray-800">Become a Premium Member</h3>
                    <p class="text-gray-600">Unlock exclusive features and advanced Islamic knowledge resources</p>
                `;
                
                // Payment form
                const paymentForm = document.createElement('form');
                paymentForm.className = 'space-y-4';
                paymentForm.innerHTML = `
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Full Name</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" placeholder="Your full name" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Email Address</label>
                        <input type="email" class="w-full px-3 py-2 border rounded-md" placeholder="your@email.com" required>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Card Information</label>
                        <div class="border rounded-md p-3 bg-gray-50">
                            <div class="flex items-center justify-between mb-2">
                                <input type="text" class="w-full px-3 py-2 border rounded-md" placeholder="Card number" required>
                                <i class="fas fa-credit-card ml-2 text-gray-400"></i>
                            </div>
                            <div class="grid grid-cols-2 gap-4">
                                <input type="text" class="px-3 py-2 border rounded-md" placeholder="MM/YY" required>
                                <input type="text" class="px-3 py-2 border rounded-md" placeholder="CVC" required>
                            </div>
                        </div>
                    </div>
                    <div>
                        <label class="block text-gray-700 text-sm font-medium mb-2">Billing Address</label>
                        <input type="text" class="w-full px-3 py-2 border rounded-md" placeholder="Street address" required>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <input type="text" class="px-3 py-2 border rounded-md" placeholder="City" required>
                        <input type="text" class="px-3 py-2 border rounded-md" placeholder="Postal code" required>
                    </div>
                    <button type="submit" class="w-full bg-gradient-to-r from-yellow-500 to-yellow-600 text-white font-bold py-2 px-4 rounded-md hover:from-yellow-600 hover:to-yellow-700 transition duration-300">
                        Subscribe Now - $9.99/month
                    </button>
                    <p class="text-xs text-center text-gray-500">By subscribing, you agree to our Terms of Service and Privacy Policy. You can cancel anytime.</p>
                `;
                
                // Add elements to modal
                modalContent.appendChild(closeButton);
                modalContent.appendChild(modalHeader);
                modalContent.appendChild(paymentForm);
                modalOverlay.appendChild(modalContent);
                
                // Add modal to body
                document.body.appendChild(modalOverlay);
                
                // Handle form submission (demo only)
                paymentForm.addEventListener('submit', (e) => {
                    e.preventDefault();
                    modalContent.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-check-circle text-green-500 text-5xl mb-4"></i>
                            <h3 class="text-2xl font-bold text-gray-800 mb-2">Thank You!</h3>
                            <p class="text-gray-600 mb-6">Your premium membership has been activated.</p>
                            <button id="closeModalBtn" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-medium py-2 px-4 rounded-md transition duration-300">
                                Close
                            </button>
                        </div>
                    `;
                    
                    document.getElementById('closeModalBtn').addEventListener('click', () => {
                        document.body.removeChild(modalOverlay);
                        // Add premium badge to user interface
                        addPremiumUserBadge();
                    });
                });
            }
            
            // Add premium user badge to interface
            function addPremiumUserBadge() {
                const userBadge = document.createElement('div');
                userBadge.className = 'fixed bottom-4 right-4 bg-gradient-to-r from-yellow-500 to-yellow-600 text-white px-4 py-2 rounded-full shadow-lg flex items-center z-40';
                userBadge.innerHTML = `
                    <i class="fas fa-crown mr-2"></i>
                    <span>Premium Active</span>
                `;
                document.body.appendChild(userBadge);
                
                // Unlock premium features visually
                const premiumCard = document.querySelector('.premium-card');
                if (premiumCard) {
                    premiumCard.innerHTML = `
                        <div class="text-center py-8">
                            <i class="fas fa-unlock-alt text-yellow-500 text-5xl mb-4"></i>
                            <h2 class="text-3xl font-bold mb-4">Premium Features Unlocked!</h2>
                            <p class="text-lg mb-6">Thank you for supporting Sabeel Islamic Knowledge System. You now have access to all premium features.</p>
                            <div class="premium-divider"></div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-8">
                                <div class="bg-white bg-opacity-10 p-6 rounded-lg text-center">
                                    <i class="fas fa-database text-yellow-500 text-3xl mb-4"></i>
                                    <h3 class="font-semibold text-lg">Advanced Database</h3>
                                    <p class="text-sm">Access our complete collection of rare Islamic manuscripts and texts</p>
                                </div>
                                <div class="bg-white bg-opacity-10 p-6 rounded-lg text-center">
                                    <i class="fas fa-project-diagram text-yellow-500 text-3xl mb-4"></i>
                                    <h3 class="font-semibold text-lg">Knowledge Graph</h3>
                                    <p class="text-sm">Explore interconnected Islamic concepts with our visual knowledge graph</p>
                                </div>
                                <div class="bg-white bg-opacity-10 p-6 rounded-lg text-center">
                                    <i class="fas fa-user-graduate text-yellow-500 text-3xl mb-4"></i>
                                    <h3 class="font-semibold text-lg">Scholar Connect</h3>
                                    <p class="text-sm">Direct access to Islamic scholars for complex questions</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            // Handle tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    tabs.forEach(t => t.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    tab.classList.add('active');
                    const contentId = 'content-' + tab.id.split('-')[1];
                    document.getElementById(contentId).classList.add('active');
                });
            });
            
            // Handle form submission
            uploadForm.addEventListener('submit', async function(e) {
                e.preventDefault();
                
                const formData = new FormData(uploadForm);
                
                // Show loading state
                const submitButton = uploadForm.querySelector('button[type="submit"]');
                const originalButtonText = submitButton.textContent;
                submitButton.textContent = 'Processing...';
                submitButton.disabled = true;
                
                try {
                    const response = await fetch('/detect', {
                        method: 'POST',
                        body: formData
                    });
                    
                    const data = await response.json();
                    
                    if (data.error) {
                        alert('Error: ' + data.error);
                        return;
                    }
                    
                    // Display results
                    resultsSection.classList.remove('hidden');
                    originalImage.src = data.original_image;
                    markedImage.src = data.marked_image;
                    expertFeedback.textContent = data.expert_feedback;
                    practiceSheet.textContent = data.practice_sheet;
                    
                    // Display errors
                    errorList.innerHTML = '';
                    if (data.errors && data.errors.length > 0) {
                        data.errors.forEach(error => {
                            const errorItem = document.createElement('div');
                            errorItem.className = 'p-3 bg-red-50 rounded-md';
                            errorItem.innerHTML = `
                                <div class="font-medium text-red-700">Line ${error.line_number}: ${error.error_type}</div>
                                <div class="mt-1 text-sm">
                                    <span class="error-highlight">${error.error_text}</span> should be 
                                    <span class="font-medium">${error.correction}</span>
                                </div>
                                <div class="mt-1 text-sm text-gray-600">${error.explanation}</div>
                            `;
                            errorList.appendChild(errorItem);
                        });
                    } else {
                        errorList.innerHTML = '<div class="p-3 bg-green-50 rounded-md text-green-700">No errors detected. Great job!</div>';
                    }
                    
                    // Scroll to results
                    resultsSection.scrollIntoView({ behavior: 'smooth' });
                    
                } catch (err) {
                    alert('An error occurred. Please try again.');
                    console.error(err);
                } finally {
                    // Restore button
                    submitButton.textContent = originalButtonText;
                    submitButton.disabled = false;
                }
            });
            
            // Print practice sheet
            printPractice.addEventListener('click', function() {
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                    <html>
                    <head>
                        <title>Math Practice Sheet</title>
                        <style>
                            body { font-family: Arial, sans-serif; padding: 20px; }
                            h1 { color: #2563eb; }
                            pre { white-space: pre-line; }
                        </style>
                    </head>
                    <body>
                        <h1>Math Practice Sheet</h1>
                        <pre>${practiceSheet.textContent}</pre>
                    </body>
                    </html>
                `);
                printWindow.document.close();
                printWindow.print();
            });
        });
    </script>
    <!-- JavaScript for Premium Section Enhancements -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Testimonials Carousel
            const testimonials = document.querySelectorAll('.testimonial-slide');
            let currentTestimonial = 0;
            
            function showTestimonial(index) {
                testimonials.forEach(slide => {
                    slide.style.opacity = '0';
                    slide.style.zIndex = '0';
                });
                testimonials[index].style.opacity = '1';
                testimonials[index].style.zIndex = '1';
            }
            
            function nextTestimonial() {
                currentTestimonial = (currentTestimonial + 1) % testimonials.length;
                showTestimonial(currentTestimonial);
            }
            
            // Initialize and start carousel
            showTestimonial(0);
            setInterval(nextTestimonial, 5000);
            
            // Premium button effects
            const premiumBtn = document.getElementById('upgradeBtn');
            const sidebarUpgradeBtn = document.getElementById('sidebarUpgradeBtn');
            const floatingBadge = document.getElementById('floatingPremiumBadge');
            
            // Show floating badge after scrolling
            window.addEventListener('scroll', function() {
                if (window.scrollY > 500) {
                    floatingBadge.classList.remove('hidden');
                } else {
                    floatingBadge.classList.add('hidden');
                }
            });
            
            // Add click event to all premium buttons
            [premiumBtn, sidebarUpgradeBtn, floatingBadge].forEach(btn => {
                if (btn) {
                    btn.addEventListener('click', function() {
                        alert('Thank you for your interest in our Premium features! This would redirect to the payment page in a production environment.');
                    });
                }
            });
            
            // ===== USER ACCOUNT SYSTEM =====
            const userAccountBtn = document.getElementById('userAccountBtn');
            const userAccountPanel = document.getElementById('userAccountPanel');
            const closeAccountPanel = document.getElementById('closeAccountPanel');
            const authModal = document.getElementById('authModal');
            const closeAuthModal = document.getElementById('closeAuthModal');
            const loginTab = document.getElementById('loginTab');
            const registerTab = document.getElementById('registerTab');
            const loginForm = document.getElementById('loginForm');
            const registerForm = document.getElementById('registerForm');
            const guestModeBtn = document.getElementById('guestModeBtn');
            const guestModeRegisterBtn = document.getElementById('guestModeRegisterBtn');
            const userDisplayName = document.getElementById('userDisplayName');
            
            // User state
            let currentUser = null;
            let userCredits = 0;
            let isGuest = false;
            
            // Open account panel or auth modal
            userAccountBtn.addEventListener('click', function() {
                if (currentUser || isGuest) {
                    showAccountPanel();
                } else {
                    showAuthModal();
                }
            });
            
            // Close account panel
            if (closeAccountPanel) {
                closeAccountPanel.addEventListener('click', function() {
                    userAccountPanel.classList.add('hidden');
                });
            }
            
            // Close auth modal
            if (closeAuthModal) {
                closeAuthModal.addEventListener('click', function() {
                    authModal.classList.add('hidden');
                });
            }
            
            // Switch between login and register tabs
            loginTab.addEventListener('click', function() {
                loginTab.classList.add('active');
                registerTab.classList.remove('active');
                loginForm.classList.remove('hidden');
                loginForm.classList.add('active');
                registerForm.classList.remove('active');
                registerForm.classList.add('hidden');
            });
            
            registerTab.addEventListener('click', function() {
                registerTab.classList.add('active');
                loginTab.classList.remove('active');
                registerForm.classList.remove('hidden');
                registerForm.classList.add('active');
                loginForm.classList.remove('active');
                loginForm.classList.add('hidden');
            });
            
            // Guest mode buttons
            guestModeBtn.addEventListener('click', function() {
                enableGuestMode();
                authModal.classList.add('hidden');
            });
            
            guestModeRegisterBtn.addEventListener('click', function() {
                enableGuestMode();
                authModal.classList.add('hidden');
            });
            
            // Handle login form submission
            loginForm.querySelector('form').addEventListener('submit', function(e) {
                e.preventDefault();
                // Simulate login
                const username = this.querySelector('input[type="text"]').value;
                loginUser(username);
                authModal.classList.add('hidden');
            });
            
            // Handle register form submission
            registerForm.querySelector('form').addEventListener('submit', function(e) {
                e.preventDefault();
                // Simulate registration
                const email = this.querySelector('input[type="email"]').value;
                const nickname = this.querySelector('input[type="text"]').value || 'User';
                registerUser(email, nickname);
                authModal.classList.add('hidden');
            });
            
            // Show auth modal
            function showAuthModal() {
                authModal.classList.remove('hidden');
            }
            
            // Show account panel
            function showAccountPanel() {
                // Update account panel content
                const userAccountContent = document.getElementById('userAccountContent');
                
                if (isGuest) {
                    userAccountContent.innerHTML = `
                        <div class="text-center py-4">
                            <div class="w-20 h-20 rounded-full bg-gray-200 flex items-center justify-center mx-auto mb-4">
                                <i class="fas fa-user text-gray-500 text-3xl"></i>
                            </div>
                            <p class="text-lg font-medium">Guest User</p>
                            <p class="text-sm text-gray-500 mb-4">You're browsing as a guest</p>
                            <button id="createAccountFromGuest" class="w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md mb-2">Create an Account</button>
                            <div class="mt-4 pt-4 border-t">
                                <p class="text-sm text-gray-600 mb-2">Guest Credits: ${userCredits}</p>
                            </div>
                        </div>
                    `;
                    
                    // Add event listener for create account button
                    setTimeout(() => {
                        document.getElementById('createAccountFromGuest').addEventListener('click', function() {
                            userAccountPanel.classList.add('hidden');
                            showAuthModal();
                            registerTab.click();
                        });
                    }, 0);
                } else {
                    userAccountContent.innerHTML = `
                        <div class="text-center py-4">
                            <div class="w-20 h-20 rounded-full bg-green-100 flex items-center justify-center mx-auto mb-4">
                                <span class="text-green-600 text-2xl font-bold">${currentUser.nickname.charAt(0).toUpperCase()}</span>
                            </div>
                            <p class="text-lg font-medium">${currentUser.nickname}</p>
                            <p class="text-sm text-gray-500 mb-4">${currentUser.email}</p>
                            <div class="bg-gray-100 rounded-lg p-3 mb-4">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm font-medium">Knowledge Credits:</span>
                                    <span class="text-green-600 font-bold">${userCredits}</span>
                                </div>
                                <div class="mt-2 text-xs text-gray-500">Complete tasks to earn more credits!</div>
                            </div>
                            <button id="logoutBtn" class="text-red-600 hover:text-red-700 text-sm font-medium">Sign Out</button>
                        </div>
                    `;
                    
                    // Add event listener for logout button
                    setTimeout(() => {
                        document.getElementById('logoutBtn').addEventListener('click', function() {
                            logoutUser();
                            userAccountPanel.classList.add('hidden');
                        });
                    }, 0);
                }
                
                userAccountPanel.classList.remove('hidden');
            }
            
            // Login user
            function loginUser(username) {
                currentUser = {
                    email: username + '@example.com',
                    nickname: username
                };
                isGuest = false;
                userCredits = Math.floor(Math.random() * 50) + 10; // Random credits between 10-60
                updateUserDisplay();
            }
            
            // Register user
            function registerUser(email, nickname) {
                currentUser = {
                    email: email,
                    nickname: nickname
                };
                isGuest = false;
                userCredits = 10; // Starting credits for new users
                updateUserDisplay();
            }
            
            // Enable guest mode
            function enableGuestMode() {
                isGuest = true;
                currentUser = null;
                userCredits = 5; // Starting credits for guests
                updateUserDisplay();
            }
            
            // Logout user
            function logoutUser() {
                currentUser = null;
                isGuest = false;
                userCredits = 0;
                updateUserDisplay();
            }
            
            // Update user display
            function updateUserDisplay() {
                if (currentUser) {
                    userDisplayName.textContent = currentUser.nickname;
                    userAccountBtn.classList.add('bg-green-600');
                    userAccountBtn.classList.remove('bg-opacity-20');
                } else if (isGuest) {
                    userDisplayName.textContent = 'Guest';
                    userAccountBtn.classList.add('bg-gray-600');
                    userAccountBtn.classList.remove('bg-opacity-20');
                } else {
                    userDisplayName.textContent = 'Account';
                    userAccountBtn.classList.remove('bg-green-600');
                    userAccountBtn.classList.add('bg-opacity-20');
                }
            }
            
            // ===== REWARD SYSTEM =====
            // Add event listener to the form submission to award credits
            const uploadForm = document.getElementById('uploadForm');
            if (uploadForm) {
                uploadForm.addEventListener('submit', function(e) {
                    // Only award credits if user is logged in or guest
                    if (currentUser || isGuest) {
                        // Award credits for task completion
                        const creditsEarned = Math.floor(Math.random() * 5) + 1; // Random 1-5 credits
                        userCredits += creditsEarned;
                        
                        // Show credit earned notification
                        showCreditNotification(creditsEarned);
                    }
                });
            }
            
            // Show credit notification
            function showCreditNotification(credits) {
                const notification = document.createElement('div');
                notification.className = 'fixed bottom-20 right-4 bg-green-600 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-bounce';
                notification.innerHTML = `<i class="fas fa-award mr-2"></i> +${credits} Knowledge Credits Earned!`;
                document.body.appendChild(notification);
                
                // Remove notification after 3 seconds
                setTimeout(() => {
                    notification.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                    setTimeout(() => {
                        document.body.removeChild(notification);
                    }, 500);
                }, 3000);
            }
            
            // ===== ISLAMIC QUOTES ROTATION =====
            const islamicQuote = document.getElementById('islamicQuote');
            const quotes = [
                '"Seeking knowledge is an obligation upon every Muslim." — Prophet Muhammad ﷺ',
                '"The ink of the scholar is more sacred than the blood of the martyr." — Attributed to Prophet Muhammad ﷺ',
                '"Whoever follows a path in pursuit of knowledge, Allah makes his way easy to Paradise." — Prophet Muhammad ﷺ',
                '"The best of people are those who are most beneficial to people." — Prophet Muhammad ﷺ',
                '"Knowledge is a treasure, but practice is the key to it." — Ibn Khaldun',
                '"Acquire knowledge and impart it to the people." — Al-Tirmidhi',
                '"The superiority of the learned scholar over the devout worshipper is like the superiority of the moon over the stars." — Abu Dawud',
                '"He who leaves home in search of knowledge walks in the path of Allah." — Tirmidhi',
                '"Wisdom is the lost property of the believer; he should take it even if he finds it in the mouth of a mushrik (polytheist)." — Tirmidhi',
                '"Read! In the Name of your Lord Who has created." — Quran 96:1'
            ];
            
            // Change quote every 10 seconds
            let currentQuoteIndex = 0;
            setInterval(() => {
                currentQuoteIndex = (currentQuoteIndex + 1) % quotes.length;
                if (islamicQuote) {
                    // Fade out
                    islamicQuote.style.opacity = '0';
                    setTimeout(() => {
                        // Change text
                        islamicQuote.textContent = quotes[currentQuoteIndex];
                        // Fade in
                        islamicQuote.style.opacity = '1';
                    }, 500);
                }
            }, 10000);
            
            // Add transition effect to quote
            if (islamicQuote) {
                islamicQuote.style.transition = 'opacity 0.5s ease';
            }
            
            // ===== ADMIN PANEL FUNCTIONALITY =====
            // Admin panel elements
            const adminPanel = document.getElementById('adminPanel');
            const closeAdminPanel = document.getElementById('closeAdminPanel');
            const adminTabs = document.querySelectorAll('#adminPanel .tab');
            const adminTabContents = document.querySelectorAll('.admin-tab-content');
            const addQuoteForm = document.getElementById('addQuoteForm');
            const quotesTableBody = document.getElementById('quotesTableBody');
            
            // Admin access (for demo purposes)
            // In a real implementation, this would be server-side authenticated
            window.addEventListener('keydown', function(e) {
                // Ctrl+Alt+A to toggle admin panel
                if (e.ctrlKey && e.altKey && e.key === 'a') {
                    toggleAdminPanel();
                }
            });
            
            // Toggle admin panel
            function toggleAdminPanel() {
                if (adminPanel.classList.contains('hidden')) {
                    adminPanel.classList.remove('hidden');
                    // Populate quotes table
                    populateQuotesTable();
                } else {
                    adminPanel.classList.add('hidden');
                }
            }
            
            // Close admin panel
            if (closeAdminPanel) {
                closeAdminPanel.addEventListener('click', function() {
                    adminPanel.classList.add('hidden');
                });
            }
            
            // Admin tab switching
            adminTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    adminTabs.forEach(t => t.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.remove('active'));
                    adminTabContents.forEach(c => c.classList.add('hidden'));
                    
                    tab.classList.add('active');
                    const contentId = 'content-' + tab.id.split('-')[1];
                    document.getElementById(contentId).classList.add('active');
                    document.getElementById(contentId).classList.remove('hidden');
                });
            });
            
            // Populate quotes table
            function populateQuotesTable() {
                if (!quotesTableBody) return;
                
                quotesTableBody.innerHTML = '';
                
                quotes.forEach((quote, index) => {
                    const parts = quote.split('—');
                    const quoteText = parts[0].trim();
                    const attribution = parts.length > 1 ? parts[1].trim() : 'Unknown';
                    
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td class="px-6 py-4">${quoteText}</td>
                        <td class="px-6 py-4">${attribution}</td>
                        <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                            <button class="text-indigo-600 hover:text-indigo-900 mr-3" data-index="${index}">Edit</button>
                            <button class="text-red-600 hover:text-red-900" data-index="${index}">Delete</button>
                        </td>
                    `;
                    
                    quotesTableBody.appendChild(row);
                });
                
                // Add event listeners to edit/delete buttons
                quotesTableBody.querySelectorAll('button').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.getAttribute('data-index'));
                        if (this.textContent === 'Edit') {
                            editQuote(index);
                        } else if (this.textContent === 'Delete') {
                            deleteQuote(index);
                        }
                    });
                });
            }
            
            // Add new quote
            if (addQuoteForm) {
                addQuoteForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const quoteText = this.querySelector('textarea').value;
                    const attribution = this.querySelector('input[type="text"]').value;
                    
                    // Add new quote to the array
                    quotes.push(`"${quoteText}" — ${attribution}`);
                    
                    // Reset form
                    this.reset();
                    
                    // Refresh quotes table
                    populateQuotesTable();
                    
                    // Show success message
                    alert('Quote added successfully!');
                });
            }
            
            // Edit quote
            function editQuote(index) {
                const quote = quotes[index];
                const parts = quote.split('—');
                const quoteText = parts[0].replace(/"/g, '').trim();
                const attribution = parts.length > 1 ? parts[1].trim() : 'Unknown';
                
                // Create edit form
                const editForm = document.createElement('div');
                editForm.className = 'fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center';
                editForm.innerHTML = `
                    <div class="bg-white rounded-lg p-6 max-w-md w-full">
                        <h3 class="text-xl font-semibold mb-4">Edit Quote</h3>
                        <form id="editQuoteForm" class="space-y-4">
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Quote Text</label>
                                <textarea class="w-full px-3 py-2 border rounded-md" rows="3" required>${quoteText}</textarea>
                            </div>
                            <div>
                                <label class="block text-gray-700 text-sm font-medium mb-2">Attribution</label>
                                <input type="text" class="w-full px-3 py-2 border rounded-md" value="${attribution}" required>
                            </div>
                            <div class="flex justify-end space-x-2">
                                <button type="button" id="cancelEditQuote" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-medium py-2 px-4 rounded-md">Cancel</button>
                                <button type="submit" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md">Save Changes</button>
                            </div>
                        </form>
                    </div>
                `;
                
                document.body.appendChild(editForm);
                
                // Cancel button
                document.getElementById('cancelEditQuote').addEventListener('click', function() {
                    document.body.removeChild(editForm);
                });
                
                // Save changes
                document.getElementById('editQuoteForm').addEventListener('submit', function(e) {
                    e.preventDefault();
                    
                    const newQuoteText = this.querySelector('textarea').value;
                    const newAttribution = this.querySelector('input[type="text"]').value;
                    
                    // Update quote in array
                    quotes[index] = `"${newQuoteText}" — ${newAttribution}`;
                    
                    // Refresh quotes table
                    populateQuotesTable();
                    
                    // Remove edit form
                    document.body.removeChild(editForm);
                    
                    // Show success message
                    alert('Quote updated successfully!');
                });
            }
            
            // Delete quote
            function deleteQuote(index) {
                if (confirm('Are you sure you want to delete this quote?')) {
                    // Remove quote from array
                    quotes.splice(index, 1);
                    
                    // Refresh quotes table
                    populateQuotesTable();
                    
                    // Show success message
                    alert('Quote deleted successfully!');
                }
            }
        });
    </script>
</body>
</html>
